<!DOCTYPE html>
<html xmlns:th="http:www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/codeReviewDetail.css}" />
<title>CodeDetail</title>
</head>

<body>
	<script th:inline="javascript">
		/*<![CDATA[*/
		function openToggle() {
			const mo_header = document.getElementById("mo_h");
			mo_header.style.display = mo_header.style.display === "block" ? "none"
					: "block"
		}
		/*]]>*/
	</script>
	<section id="wrap">
		<header id="header_wrap">
			<div class="header_box">
				<div class="logo_box">
					<img th:src="@{/img/logo.PNG}" alt=""> <a href="/"><h1>EndersOverFlow</h1></a>
				</div>
				<div class="login_box">
					<a href="/member/login">로그인</a>
				</div>
				<div class="list_btn">
					<img th:src="@{/img/list_btn.PNG}" alt=""
						th:onclick="javascript:openToggle()">
				</div>
				<div class="mobile_header" id="mo_h">
					<ul>
						<li><a href="#">ㅎㅇ</a></li>
						<li><a href="#">ㅎㅇ</a></li>
						<li><a href="#">ㅎㅇ</a></li>
					</ul>
				</div>
			</div>
		</header>
		<section id="content_wrap">
			<nav class="side_bar">
				<ul>
					<li>코드리뷰</li>
					<li>코드리뷰</li>
					<li>코드리뷰</li>
					<li>코드리뷰</li>
				</ul>
			</nav>
			<div class="content">
				<!-- TODO 값을 전달 받으면 아래 div는 삭제하고 주석 해제 -->
				<div class="codeReviewDetailArea">
					<header class="detail_context">
						<span th:text="타이틀" style="margin: auto 0px;"></span>
						<img alt="스타" th:src="@{/img/빈별.png}" th:onclick="starChange(${item.isStar})" style="width: 20px;">
					</header>
					<header class="detail_context" style="margin-top: 20px">
						<span th:text="Row_숫자"></span>
						<span th:text=" lines "></span>
						<!-- TODO : 이미지 누르면 수정페이지로 교체하기 textAreaEdit 내부에 있는 내용을 CK에디터로 교체만 하면 됌-->
						<img alt="edit" th:src="@{/img/edit.png}" th:onclick="starChange(${item.isStar})" style="width: 20px; float: right;">
					</header>
					<div class="textAreaEdit">
						<article class="textLines">
							<p class="commentYN commentN" onclick="commentView(event, '1')">텍스트 텍스트</p>
							<div class="commentManage" th:id="1" style="display: none; padding-left: 15px;">
								<div class="codeReviewTextLineComments">
								</div>
								<div class="commentManageFixedAe">
									<p class="codeReviewTextLinePTag">Comments</p>
									<div class="codeReviewTextLine" style="margin-top: 10px">
										<textarea class="codeReviewTextLine textareaTag" rows="" cols=""  placeholder="Add an optional extended description…"></textarea>
										<button class="codeReviewTextLine buttonTag" style="width: 9%; height: 30px">등록</button>
									</div>
								</div>
							</div>
						</article> 
						<article class="textLines">
							<p class="commentYN commentY" onclick="commentView(event, '2')">텍스트 텍스트</p>
							<div class="commentManage" th:id="2" style="display: none; padding-left: 15px;">
								<div class="codeReviewTextLineComments">
									<div class="codeReviewTextLineComments commentArea">
										<span class="codeReviewTextLineComments span" th:text="정동욱"></span>
										<img class="codeReviewTextLineComments img" alt="스타" th:src="@{/img/빈별.png}"  style="width: 20px;">
										<div>
											<p th:text="댓글댓글"></p>
										</div>
									</div>
									<div class="codeReviewTextLineComments commentArea">
										<span class="codeReviewTextLineComments span" th:text="이재민"></span>
										<img class="codeReviewTextLineComments img" alt="스타" th:src="@{/img/빈별.png}"  style="width: 20px;">
										<div class="codeReviewTextLineComments div">
											<p class="codeReviewTextLineComments comments" th:text="댓글댓글댓글댓글"></p>
										</div>
									</div>
								</div>
								<div class="commentManageFixedAe">
									<p class="codeReviewTextLinePTag">Comments</p>
									<div class="codeReviewTextLine" style="margin-top: 10px">
										<textarea class="codeReviewTextLine textareaTag" rows="" cols="" placeholder="Add an optional extended description…"></textarea>
										<button class="codeReviewTextLine buttonTag" style="width: 9%; height: 30px">등록</button>
									</div>
								</div>
							</div>
						</article> 
						<article class="textLines">
							<p class="commentYN commentN" onclick="commentView(event, '3')">텍스트 텍스트</p>
							<div class="commentManage" th:id="3" style="display: none; padding-left: 15px;">
								<div class="codeReviewTextLineComments">
								</div>
								<div class="commentManageFixedAe">
									<p class="codeReviewTextLinePTag">Comments</p>
									<div class="codeReviewTextLine" style="margin-top: 10px">
										<textarea class="codeReviewTextLine textareaTag" rows="" cols="" placeholder="Add an optional extended description…"></textarea>
										<button class="codeReviewTextLine buttonTag" style="width: 9%; height: 30px">등록</button>
									</div>
								</div>
							</div>
						</article> 
						<article class="textLines">
							<p class="commentYN commentN" onclick="commentView(event, '4')">텍스트 텍스트</p>
							<div class="commentManage" th:id="4" style="display: none; padding-left: 15px;">
								<div class="codeReviewTextLineComments">
								</div>
								<div class="commentManageFixedAe">
									<p class="codeReviewTextLinePTag">Comments</p>
									<div class="codeReviewTextLine" style="margin-top: 10px">
										<textarea class="codeReviewTextLine textareaTag" rows="" cols="" placeholder="Add an optional extended description…"></textarea>
										<button class="codeReviewTextLine buttonTag" style="width: 9%; height: 30px">등록</button>
									</div>
								</div>
							</div>
						</article> 
					</div>
					
					<footer class="reviewDetailFooter" style="margin-top: 20px">
						<div class="codeReviewComments">
							<div class="commentArea">
								<span th:text="정동욱"></span>
								<img alt="스타" th:src="@{/img/빈별.png}"  style="width: 20px;">
								<div>
									<p th:text="댓글댓글"></p>
								</div>
							</div>
							<div class="commentArea">
								<span th:text="이재민"></span>
								<img alt="스타" th:src="@{/img/빈별.png}"  style="width: 20px;">
								<div>
									<p th:text="글댓글댓"></p>
								</div>
							</div>
						</div>
						<div class="commentMainManage">
							<p class="codeReviewTextLinePTag">Comments</p>
							<div style="margin-top: 10px">
								<textarea class="textareaTag" rows="" cols="" style="width: 90%;" placeholder="Add an optional extended description…"></textarea>
								<button style="width: 9%; height: 30px">등록</button>
							</div>
						</div>
					</footer>
				<!--
					// TODO
					// 데이터 넘어오면 아래 내용으로 대체
					<header class="detail_context">
						// TODO
						// 이게 추천코드글이라면 star가 나와야하지만 아니라면 star가 나와서는 안된다.
						// 반대로 댓글에 있는 star기능은 반드시 코드리뷰글일 때만 나오게 해야한다.
						// 글을 저장할 때 코드리뷰글인지 아니면 추천코드글인지를 구분해주는 컬럼이 하나 있어야겠다.
						<span th:text="${title}"></span>
						<img th:if="${isStar} == 'N'" alt="스타" th:src="@{/img/빈별.png}" th:onclick="starChange(${item.isStar})"  style="width: 20px;">
						<img th:if="${isStar} == 'Y'" alt="스타" th:src="@{/img/꽉찬별.png}" th:onclick="starChange(${item.isStar})"  style="width: 20px;">
					</header>
					// TODO 
					// 아래 textLineList가 출력될 때 댓글이 있는 textLine과 그렇지 않은 라인을 구분해서 출력해줘야한다.
					<div class="textAreaEdit" style="margin-top: 20px">
						<article class="textLines" th:each="item : ${textLineList}">
							<p class="commentYN commentY" th:if="${item.commentYN} == 'Y'" th:onclick="commentView(event, ${item.no})" th:text="${item.text}"></p>
							<p class="commentYN commentN" th:if="${item.commentYN} == 'N'" th:text="${item.text}"></p>
							<div class="commentManage" th:id="${item.no}" display: none; padding-left: 15px;">
								// TODO
								// 해당 textLine에 해당하는 Comment가 있다면 붙여주기
								<div class="codeReviewTextLineComments">
									// TODO
									// 이 위치에 div태그가 들어올 예정(댓글)
								</div>
								<div class="commentManageFixedAe">
									<p class="codeReviewTextLinePTag">Comments</p>
									<div class="codeReviewTextLine" style="margin-top: 10px">
										<textarea class="codeReviewTextLine textareaTag" rows="" cols=""></textarea>
										<button class="codeReviewTextLine buttonTag" style="width: 9%; height: 30px">등록</button>
									</div>
								</div>
							</div>
						</article> 
					</div>
					<footer class="reviewDetailFooter" style="margin-top: 20px">
						<div class="codeReviewComments">
							// TODO
							// 이 글에 대한 Comment가 있다면 붙여주기
							// 이 위치에 div태그가 들어올 예정
							//댓글
						</div>
						<div class="commentMainManage">
							<p class="codeReviewTextLinePTag">Comments</p>
							<div style="margin-top: 10px">
								<textarea class="textareaTag" rows="" cols="" style="width: 90%;" placeholder="Add an optional extended description…"></textarea>
								<button style="width: 9%; height: 30px">등록</button>
							</div>
						</div>
					</footer>
			  	-->
				</div>
			</div>
		</section>
	</section>
</body>
<script type="text/javascript">
	function starChange(isStar) {
		if (isStar == 'Y') {
			// TODO
			// ajax통신을 통해 내가 누른 star목록에서 해당 글의 isStar를 N으로 바꾸고
			// star 글 목록에서 해당 글의 star수를 -1 시키기 
		} else {
			// TODO
			// ajax통신을 통해 내가 누른 star목록에서 해당 글의 isStar를 Y로 바꾸고
			// star 글 목록에서 해당 글의 star수를 +1 시키기 
		}
	}
	function commentView(event, id){
		if (document.getElementById(id).style.display=="none"){
			for (var i in document.getElementsByClassName("commentManage")){
				if (i == "length") {
					break;
				}
				document.getElementsByClassName("commentManage")[i].style['display']="none"
			}
			document.getElementById(id).style.display="block";
		} else if (document.getElementById(id).style.display=="block"){
			document.getElementById(id).style.display="none";
		}
	}
	function commentSearch(id){
		// TODO
		// ${codeReviewNo}와 id를 이용해서 해당 텍스트라인의 댓글 정보를 불러오기
		// 없으면 그냥 return 있으면 해당 정보를 document.getElementById(id) 안에 innerHTML로 집어넣어주기
		// <div class="codeReviewTextLineComments commentArea" th:each="commentItem : ${commentList}" th:text="${commentItem}">
		//		<span class="codeReviewTextLineComments span" th:text="commentItem.creater" style="margin: auto 0px;"></span>
		//		<img class="codeReviewTextLineComments img" th:if="${commentItem.isStar} == 'N'" alt="스타" th:src="@{/img/빈별.png}" th:onclick="starChange(${item.isStar})" style="width: 20px;">
		//		<img class="codeReviewTextLineComments img" th:if="${commentItem.isStar} == 'Y'" alt="스타" th:src="@{/img/꽉찬별.png}" th:onclick="starChange(${item.isStar})" style="width: 20px;">
		//		<div class="codeReviewTextLineComments div">
		//			<p class="codeReviewTextLineComments comments" th:text="commentItem.contents"></p>
		//		</div>
		// </div>
		// 이런식으로 작동 될 수 있게 태그를 붙여넣기
	}
	function codeReviewCommentSearch(){
		// TODO
		// 이 페이지로 진입하자마자 ${codeReviewNo}를 이용해 이글에 대한 댓글을 조사해서 제일 하단에 입력해주기
		// <div class="commentArea" th:each="commentItem : ${commentList}" th:text="${commentItem}">
		//		<span th:text="commentItem.creater" style="margin: auto 0px;"></span>
		//		<img th:if="${commentItem.isStar} == 'N'" alt="스타" th:src="@{/img/빈별.png}" th:onclick="starChange(${item.isStar})" style="width: 20px;">
		//		<img th:if="${commentItem.isStar} == 'Y'" alt="스타" th:src="@{/img/꽉찬별.png}" th:onclick="starChange(${item.isStar})" style="width: 20px;">
		//		<div>
		//			<p th:text="commentItem.contents"></p>
		//		</div>
		// </div>
		// 이런식으로 작동 될 수 있게 태그를 붙여넣기
	}
	document.getElementsByTagName('body')[0].addEventListener('click', function(event){
		console.log(event.target.className.indexOf("codeReviewTextLineComments"));
		if (event.target.className.indexOf('commentManage') || event.target.className.indexOf("codeReviewTextLineComments") != -1 || event.target.className.indexOf("codeReviewTextLine") != -1){
			return
		} else if (event.target.className == 'commentYN'){
			return
		} else{
			for (var i in document.getElementsByClassName("commentManage")){
				if (i == "length") {
					break;
				}
				document.getElementsByClassName("commentManage")[i].style['display']="none"
			}
		}
		
    });
</script>
</html>